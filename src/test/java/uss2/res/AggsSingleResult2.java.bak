package uss2.res;

import java.util.Collection;
import java.util.Collections;
import java.util.Map;
import java.util.Optional;

import org.apache.commons.collections4.CollectionUtils;

import uss2.es.uss.res.BaseResult;

import uss.res.AggsFlatResult2.AggsFlatItem;

/**
 * USS aggs flat result
 * 
 * @author Ponfee
 */
public class AggsSingleResult2 extends BaseResult {

    private static final long serialVersionUID = 8416510168590360734L;

    private AggsFlatItem agg;

    public AggsSingleResult2() {}

    public AggsSingleResult2(AggsFlatResult2 aggs) {
        super(aggs);
        Map<String, AggsFlatItem> $aggs = Optional.ofNullable(aggs.getAggs())
                                                  .orElse(Collections.emptyMap());

        if ($aggs.size() > 1) {
            throw new IllegalArgumentException("Cannot supported multiple aggregations.");
        }

        Collection<AggsFlatItem> list = $aggs.values();
        this.agg = CollectionUtils.isEmpty(list) ? null : list.iterator().next();
    }

    public AggsFlatItem getAgg() {
        return agg;
    }

    public void setAgg(AggsFlatItem agg) {
        this.agg = agg;
    }

}
